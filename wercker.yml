# Copyright 2017, Oracle Corporation and/or affiliates.  All rights reserved.

# This is a sample that demonstrates how to use the Java Flight Recorder 
# Wercker step. 
#

box: 
  id: store/oracle/serverjre
  username: $DOCKER_USERNAME
  password: $DOCKER_PASSWORD
  tag: 8

dev:
  steps:
#    - internal/shell
    - markxnelson/java-flight-recorder@0.1.40 "https://github.com/markxnelson/java-flight-recorder/archive/master.tar.gz":
      timeout: 2m
      application: com.oracle.sample.SampleApplication
      classpath: /pipeline/source/build/libs/sample-jfr-step.jar
      filename: myrecording.jfr
      experimental: true
      duration: 4m
      delay: 30s 
      maxsize: 10M
      maxage: 1h

# add pipelines for all the different tests
# and a top level one to run them all
